<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>TANCC â€“ Private Preview</title>
  <link rel="stylesheet" href="./styles.css?v=tancc5" />
  <style>
    body.tancc-auth{
      min-height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:24px;
    }
    .auth-card{
      width:min(520px, 100%);
      background:rgba(255,255,255,.05);
      border:1px solid rgba(255,255,255,.10);
      border-radius:20px;
      box-shadow:0 20px 60px rgba(0,0,0,.55);
      overflow:hidden;
    }
    .auth-top{
      display:flex;
      gap:16px;
      padding:18px;
      align-items:center;
      border-bottom:1px solid rgba(255,255,255,.08);
      background:rgba(0,0,0,.14);
    }
    .auth-top img{
      width:76px;
      height:76px;
      border-radius:14px;
      object-fit:cover;
      border:1px solid rgba(255,255,255,.10);
    }
    .auth-title{
      margin:0;
      font-size:18px;
      font-weight:850;
      line-height:1.15;
    }
    .auth-sub{
      margin:6px 0 0;
      font-size:13px;
      opacity:.70;
    }
    .auth-body{
      padding:18px;
    }
    .row{
      display:flex;
      gap:10px;
      align-items:center;
      margin-top:10px;
    }
    .pw{
      flex:1;
      padding:12px 12px;
      border-radius:12px;
      border:1px solid rgba(255,255,255,.10);
      background:rgba(0,0,0,.22);
      color:rgba(245,247,250,.93);
      outline:none;
      font-size:14px;
    }
    .pw:focus{
      border-color:rgba(255,255,255,.20);
    }
    .err{
      margin-top:10px;
      font-size:13px;
      color:rgba(255,180,180,.95);
      min-height:18px;
    }
  </style>
</head>
<body class="tancc-auth">
  <div class="auth-card">
    <div class="auth-top">
      <img src="cover.jpg" alt="Cover art" />
      <div>
        <h1 class="auth-title">The All-Night Costume Company</h1>
        <div class="auth-sub">Private preview. Enter password to continue.</div>
      </div>
    </div>

    <div class="auth-body">
      <label class="tiny muted" for="pw">Password</label>
      <div class="row">
        <input id="pw" class="pw" type="password" autocomplete="current-password" />
        <button id="go" class="btn btn-primary" type="button">Enter</button>
      </div>
      <div id="err" class="err"></div>
    </div>
  </div>

  <script src="./auth.js?v=2"></script>
  <script>
    // If already authed, go straight to player
    if (window.TANCCAuth.isAuthed()) {
      location.replace("./player.html");
    }

    const pw = document.getElementById("pw");
    const go = document.getElementById("go");
    const err = document.getElementById("err");

    function submit() {
      err.textContent = "";
      const ok = window.TANCCAuth.login(pw.value);
      if (!ok) {
        err.textContent = "Wrong password.";
        pw.focus();
        pw.select();
        return;
      }
      location.replace("./player.html");
    }

    go.addEventListener("click", submit);
    pw.addEventListener("keydown", (e) => {
      if (e.key === "Enter") submit();
    });

    setTimeout(() => pw.focus(), 0);
  </script>
</body>
</html>
